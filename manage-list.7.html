<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>店铺财务</title>
    <link rel="stylesheet" href="public/static/common/css/base.css">
    <link rel="stylesheet" href="public/static/common/css/public.css">
    <link rel="stylesheet" href="public/static/factory/css/main.css">
    <link rel="stylesheet" href="public/static/common/js/layer.mobile/need/layer.css">
</head>
<body>
<!--设置店长-->
<section id="employeeAccountInfo" style="display:none;">
    <form class="employeeAccountForm">
        <div class="account-field">
            <span class="content-label">姓名</span>
            <input type="text" class="" placeholder="姓名" name="name">
        </div>
        <div class="account-field">
            <span class="content-label">手机号码</span>
            <input type="tel" class="" placeholder="手机号码" name="mobile_phone">
        </div>
        <div class="account-field account_position">
            <span class="content-label">职务设置</span>
            <!--<input type="text" class="col" value="职务总监" name="job_director" readonly="readonly">
            <input type="text" class="col" value="财务经理" name="financial_manager" readonly="readonly">
            <input type="text" class="col" value="财务专员" name="financial_commissioner" readonly="readonly">-->
            <ul>
                <li class="col" data-id="">职务总监</li>
                <li class="col" data-id="">财务经理</li>
                <li class="col" data-id="">财务专员</li>
            </ul>
        </div>
        <div class="account-field permission_options">
            <span class="content-label">账号授权</span>
            <ul>
                <li href="javascript:void(0);" class="content-label" data-id="">退货款：处理线上店铺/内嵌式门店的订单退款</li>
                <li href="javascript:void(0);" class="content-label" data-id="">开发票：开具线上订单款项发票</li>
            </ul>
        </div>
        <div class="account-field permission_options">
            <span class="content-label">负责店铺</span>
            <ul>
                <li href="javascript:void(0);" class="content-label" data-id="">
                    <p><span>某某</span>机构官方旗舰店</p>
                    <p>美尚会云店店铺</p>
                </li>
                <li href="javascript:void(0);" class="content-label" data-id="">
                    <p><span>某某</span>品牌官方旗舰店</p>
                    <p>美尚会云店店铺</p>
                </li>
                <li href="javascript:void(0);" class="content-label" data-id="">
                    <p><span>某某</span>机构官方旗舰店</p>
                    <p>内嵌式门店店铺</p>
                </li>
            </ul>
        </div>
    </form>
    <div class="error_tipc"></div>
</section>
<section style="display: none;" id="employeeAccountList">
    <li class="columns_flex l-r-sides">
        <div>
            <p>
                <span>姓名</span>
                <input class="input_size" type="text" value="阿三" name="name" readonly="readonly">
            </p>
            <div>
                <span>手机号码:</span>
                <input type="tel" value="13430393576" name="mobile_phone" readonly="readonly"/>
            </div>
            <div>
                <span>授权职务:</span>
                <input type="text" value="" name="position" readonly="readonly"/>
            </div>
        </div>
        <div class="operate-btn">
            <a href="javascript:void(0);" class="modify-account">
                <span></span>
                修改
            </a>
            <a href="javascript:void(0);" class="delete-account">
                <span></span>
                删除
            </a>
        </div>
    </li>
</section>
<article class="f24">
    <div class="top_header">
        <section class="top_nav_fixed top_nav_store">
                <div class="top_bar top-switch-bar columns_flex l-r-sides">
                    <!--<div class="">
                        <a class="home top_icon" href="/store/Index/index.html">首页</a>
                    </div>-->
                    <div class="top_left_f">
                        <img id="" class="left store-logo-img" src="http://msy.meishangyun.com/uploads/factory_record/2018092516061665977.jpeg">
                        <span class="store-name">订单</span>
                    </div>
                    <div class="">
                        <div class="columns_flex">
                            <a href="javascript:void(0);" class="shopping_cart top_icon"></a>
                            <a href="javascript:void(0);" class="personal_center top_icon"></a>
                            <a href="/store/Index/index.html" class="home top_icon"></a>
                        </div>
                        <a href="javascript:void(0);" class="switch-factory ">切换美容店家账号&gt;</a>
                    </div>
                </div>
        </section>
        <section class="specific_type bottomLine store_deploy_nav">
            <div class="columns_flex f20 l-r-sides ">
                <a href="/store/Manager/index.html">管理员</a>
                <a href="/store/Record/preview.html">档案</a>
                <a href="/store/Brand/manage.html">商标</a>
                <a href="/store/Store/manage.html">开店</a>
                <a href="/store/Store/getList.html">店铺</a>
                <a href="/store/Shop/index.html">门店</a>
                <a href="javascript:void(0);">财务</a>
            </div>
        </section>
	</div>
    <section class="f24 account-content-wrapper">
        <div class="content-top">
            <a href="javascript:void(0);" class="add_employee_account">新增财务结算员工账号</a>
            <div class="search_module_bar">
                <input type="button" class="search_btn left"/>
                <input type="text" class="search_text left" placeholder="输入姓名/手机号搜索账号"/>
            </div>
            <p class="emp_account_tipc">财务结算员工账号</p>
            <ul class="list">
                <li>
                    <span>暂无账号</span>
                </li>
            </ul> 
        </div>
    </section>
</article>
<script type="text/javascript" src="public/static/common/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="public/static/common/js/public.js"></script>
<script type="text/javascript" src="public/static/common/js/common.js"></script>
<script type="text/javascript" src="public/static/common/js/dialog.js"></script>
<script type="text/javascript" src="public/static/common/js/layer.mobile/layer.js"></script>
<script type="text/javascript"> 
    $(function(){
        //新增结算员工账号
        var employeeAccountInfo=$('#employeeAccountInfo').html();
		$('body').on('click','.add_employee_account',function(){
            var _this=$(this).parents('.list li');
            layer.open({
                title:['新增财务结算员工账号','border-bottom:1px solid #d9d9d9;'],
                className:'employeeAccountLayer',
                content:employeeAccountInfo,
                type:1,
                anim:'up',
                style:'',
                btn:['确定','取消'],
                success:function(){
                    $('.layui-m-layermain .layui-m-layersection').addClass('bottom-layer');
                },
                yes:function(index){
                    var postData={};
                    postData = $('.employeeAccountForm').serializeObject();
                    postData.nodeIds=[];
                    var html=$('#employeeAccountList').html();
                    var listLength=$('.list li').length;
                    var content='';
                    if(!postData.name){
                        content='请填写结算员工姓名';
                    }else if(!register.phoneCheck(postData.mobile_phone)){
                        content='请填写手机号码';
                    }
                    if(content){
                        dialog.error(content);
                        return false;
                    }
                    if(listLength<1){
                        console.log(listLength);
                        $('.list').append(html);
                        
                    }else{
                        $('.list li:first').before(html);                        
                    }
                    $.each($('.employeeAccountLayer').find('li'),function(){
						if($(this).attr('class')=='current'){
							postData.nodeIds.push($(this).data('id'));
						}
					});
                    // var config = {
					// 	url:module + 'Manager/edit',
					// 	postData:postData,
					// 	index:index
					// };
					// dialogFormAdd(config);
                    layer.close(index);
                }
            });
        });
        //修改
        $('body').on('click','.modify-account',function(){
            var _this=$(this).parents('.list li');
            layer.open({
                title:['修改账号','border-bottom:1px solid #d9d9d9;'],
                className:'employeeAccountLayer',
                type:1,
                anim:'up',
                content:employeeAccountInfo,
                 btn:['确定','取消'],
                success:function(){
                    $('.layui-m-layermain .layui-m-layersection').addClass('bottom-layer');
                    copyDataByName(_this,$('.employeeAccountLayer .employeeAccountForm'));
                },
                yes:function(index){
                    var postData={};
                    var content='';
                    postData=$('.employeeAccountLayer .employeeAccountForm').serializeObject();
                    if(!postData.name){
                        content='请填写姓名';
                    }else if(!register.phoneCheck(postData.mobile_phone)){
                        content='请填写手机号码';
                    }
                    if(content){
                         dialog.error(content);
                        return false;
                    }
                    // var config = {
					// 	url:module + 'Manager/edit',
					// 	postData:postData,
					// 	fromObj:$('.employeeAccountLayer .employeeAccountForm'),
					// 	toObj:_this,
					// 	index:index
					// };
                    // dialogFormEdit(config)
                    layer.close(index);
                    
                }
            })
        });
        //删除
		$('body').on('click','.delete-account',function(){
			var _this=$(this).parents('.list li');
			layer.open({
				title:['删除账号','border-bottom:1px solid #d9d9d9;color:#ff0000;'],
				className:'employeeAccountLayer',
                type:1,
                anim:'up',
				content:employeeAccountInfo,
				btn:['确定','取消'],
				success:function(){
                    $('.layui-m-layermain .layui-m-layersection').addClass('bottom-layer');
					copyDataByName(_this,$('.employeeAccountLayer .employeeAccountForm'));
				},
				yes:function(index){
					var postData = {};
					postData.id = _this.data('id');
					postData.userFactoryId = _this.data('user_factory_id');
					// var config = {
					// 	url:module + 'Manager/del',
					// 	postData:postData,
					// 	obj:_this,
					// 	index:index
					// };
					// dialogFormDel(config);
                    
				}
			});
		});
        $('body').on('click','.list li',function(){
			$(this).addClass('current').siblings().removeClass('current');
			$(this).find('.operate-btn').show();
			$(this).siblings().find('.operate-btn').hide();
		});
        //选择授权设置样式
        $('body').on('click','.employeeAccountLayer li',function(){
			$(this).toggleClass('current');
		});
    })
</script>
</body>

</html>