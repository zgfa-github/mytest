<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>美尚卖手平台</title>
    <link rel="stylesheet" href="Public/css/common/public.css">
	<link rel="stylesheet" href="Public/css/common/weui.css">
    <link rel="stylesheet" type="text/css" href="Public/css/home/mall.css">
    <link rel="stylesheet" href="Public/js/common/layer.mobile/need/layer.css">
</head>
<body>
<article class="msh_product_picture f24">
    <section class="purchase_head_title ">
        <h2>采购商的评分评论</h2>
    </section>
    <div id="sellerScoringReview">
        <div class="score_review_content f24">
            <div class="score_review_item">
                <span class="my_scoring">请选择评分</span>
                <div class="my_score_star">
                    <div class="star_score star_img">
                        <img src="Public/img/common/star.png" />
                        <img src="Public/img/common/star.png" />
                        <img src="Public/img/common/star.png" />
                        <img src="Public/img/common/star.png" />
                        <img src="Public/img/common/star.png" />s
                    </div>
                    <span class="fraction" data-score=""></span>
                </div>
            </div>
            <div class="score_review_item">
                <span class="my_scoring">我的评论（可不填）</span>
                <input type="text" placeholder="评论标题" class="business_record_title seller_comment_title" value="123456799999">
                <textarea name="" id="" cols="30" rows="10" placeholder="评论内容" class="business_record_content seller_comment_text"></textarea>
            </div>
        </div>
    </div>
    <section class="f24 seller_scoring_review">
        <div>
            <div class="store_score_title">
                <span>采购商评分</span>
                <p><span>56</span>采购商评分</p>
            </div>
            <div class="store_score_star five_star">
                <div class="star_img empty_star">
                    <span class="real_star"></span>
                </div>
                <span class="fraction" data-score=""></span>
            </div>
            <div class="score_star_item">
                <div class="store_score_star five_star store_score_progress">
                    <div class="star_img empty_star" data-id="5">
                        <span class="real_star"></span>
                    </div>
                    <div class="star_progress_bar">
                        <span class="real_star_progress"></span>
                    </div>
                </div>
            </div>
            <div class="score_star_item">
                <div class="store_score_star five_star store_score_progress">
                    <div class="star_img empty_star" data-id="4.5">
                        <span class="real_star"></span>
                    </div>
                    <div class="star_progress_bar">
                        <span class="real_star_progress"></span>
                    </div>
                </div>
            </div>
            <div class="score_star_item">
                <div class="store_score_star five_star store_score_progress">
                    <div class="star_img empty_star" data-id="3.5">
                        <span class="real_star"></span>
                    </div>
                    <div class="star_progress_bar">
                        <span class="real_star_progress"></span>
                    </div>
                </div>
            </div>
            <div class="score_star_item">
                <div class="store_score_star five_star store_score_progress">
                    <div class="star_img empty_star" data-id="2.1">
                        <span class="real_star"></span>
                    </div>
                    <div class="star_progress_bar">
                        <span class="real_star_progress"></span>
                    </div>
                </div>
            </div>
            <div class="score_star_item">
                <div class="store_score_star five_star store_score_progress">
                    <div class="star_img empty_star" data-id="1.2">
                        <span class="real_star"></span>
                    </div>
                    <div class="star_progress_bar">
                        <span class="real_star_progress"></span>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="store_score_title">
                <span>采购商评论</span>
                <p><span>53</span>采购商评论</p>
            </div>
            <div class="sales_comment_list">
                <span class="thumbs_up">给这位老师点个赞</span>
                <div class="store_score_star five_star">
                    <div class="star_img empty_star">
                        <span class="real_star"></span>
                    </div>
                    <div><span>李四</span><em>—</em><span>2017年3月XX日</span></div>
                </div>
                <p>老师在我们店里的本次销售业绩很给力，老师非常敬业，销售能力超强，技术非常好，对顾客有耐心，给的顾客都搞定了。</p>
            </div>
        </div>
    </section>
</article>

<script src="Public/js/common/jquery-1.11.3.min.js"></script>
<script src="Public/js/common/layer.mobile/layer.js"></script>
<script src="public/js/common/public.js"></script>
<script src="public/js/common/common.js"></script>
<script>
$(function(){
    $('.five_star').setStar(4.8);
    console.log($('.five_star').getStar());
    //星星评分等级(定位)
    $('.star_img').classStar(2.1);
    $.each($('div[data-id]'),function(i,obj){
        var starParentId=$(this).data('id');
        $(this).classStar(starParentId);
        $(this).next().getProgressBar(starParentId);
        
    }); 
    //点击星星评分
    $('body').on('click','.star_score img',function(){
        var star='Public/img/common/star.png';
        var starRed='Public/img/common/starred.png';
        var prompt=['1分','2分','3分','4分','5分'];	
        var starId=$(this).index();		
        $.each($('.star_score img'),function(){
            $(this).attr('src',star);//遍历img元素为空心星
        })
        $(this).attr('src',starRed);		
        $(this).prevAll().attr('src',starRed);
        $(this).parent().next('.fraction').text(prompt[starId]);
        $(this).parent().next('.fraction').attr('data-score',starId+1);
    });

    // 上传图片  
    $('body').on('change','.uploadImg',function(){ 
        var img = event.target.files[0];
        var obj=$(this).parent(); 

        // 判断是否图片  
        if(!img){  
            return false;  
        } 

        // 判断图片格式
        var imgRegExp=/\.(?:jpg|jpeg|png|gif)$/;
        if(!(img.type.indexOf('image')==0 && img.type && imgRegExp.test(img.name)) ){  
            layer.open({
                content:'请上传：jpg、jpeg、png、gif格式图片',
                time:2
            }) ;
        }    
        var reader = new FileReader();  
        reader.readAsDataURL(img);
        reader.onload = function(e){
            var imgUrl=e.target.result;
            console.log(e.target.result);
            $(obj).addClass('active');
            $(obj).find('img').attr('src',imgUrl)
            $.post("server.php", { img: e.target.result},function(ret){ 
                if(!ret.img){  
                    return false;
                }
                
            },'json');  
        }
    });
})
</script>
</body>
</html>