<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>用户登录</title>
    <link rel="stylesheet" href="Public/css/common/public.css">
	<link rel="stylesheet" href="Public/css/common/weui.css">
    <link rel="stylesheet" type="text/css" href="Public/css/home/mall.css">
    <link rel="stylesheet" href="Public/js/common/layer.mobile/need/layer.css">
    <style>
        .loginLayer .layui-m-layercont{padding:0 0.15rem;text-align:left;}
        .loginLayer .layui-m-layerbtn{border-top:none;}
        .login_wrap.hide{display:none;}
        .loginNav {height:.8rem;line-height:.8rem;border-bottom:1px solid #d9d9d9;}
        .loginNav li{width:50%;display:inline-block;float: left;text-align: center;}
        .loginNav li.current{border-bottom:2px solid #f23030;}
        .login_item{
            position: relative;
            width: 100%;
            height: .8rem;
            line-height: .8rem;
            overflow: hidden;
            padding: 0 .05rem;
            background-color: #fff;
            border-bottom: 1px solid #d7d7d7;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .login_item>span {
            position: absolute;
            width: .6rem;
            display: inline-block;
            font-family: PingFang-SC-Regular;
            text-align: left;
        }
        .username {
            width: 100%;
            padding: 0 .3rem 0 .6rem;
        }
        .mesg_code {
            position: absolute;
            width: 1.3rem;
            height: .43rem;
            line-height: .43rem;
            right: 0;
            top: 0;
            background-color: #fff;
            font-size: .24rem;
            border: 0;
            outline: 0;
            border-radius: 2px;
            -webkit-box-shadow: 0 0 0 1px #f23030;
            box-shadow: 0 0 0 1px #f23030;
        }
        .login_item .mesg_code{
            width: 1.48rem;
            border-left: 1px solid #d7d7d7;
            padding: 0;
            color:#333;
            /*height: .23rem;
            line-height: .23rem;*/
            top: .15rem;
            outline: 0;
            background-color: #fff;
            -webkit-box-shadow: none;
            box-shadow: none;
        }
        /*.login_item:last-child{border-bottom:none;}*/
        .loginBtn {
            height: .45rem;
            line-height: .46rem;
            background-color: #eee;
            border-radius: 2px;
            border: 0;
            display: block;
            text-align: center;
            color:#333;
        }
        .error_tipc{display:none;color:#ff0000;padding:0.12rem 0;}
    </style>
</head>
<body>
    <section id="userLoginForm" style="display:none;">
        <div class="f24">
            <ul class="loginNav">
                <li class="current">账号密码登录</li>
                <li>短信验证码登陆</li>
            </ul>
            <form class="loginTab">
                <div class="userLogin login_wrap active">
                    <div class="login_item">
                        <span class="username_txt">账号</span>
                        <input class="username user_name" type="text" placeholder="请输入用户名" value="" name="">
                    </div>
                    <div class="login_item">
                        <span class="password_txt">密码</span>
                        <input class="username password" type="password" placeholder="请输入密码" name="" value="">
                    </div>
                </div>
                <div class="smsLogin login_wrap hide">
                    <div class="login_item">
                        <span class="username_txt">手机号</span>
                        <input class="username user_phone" type="tel" placeholder="请输入手机号" value="" name="">
                        <a href="javascript:void(0);" class="mesg_code">获取验证码</a>
                    </div>
                    <div class="login_item">
                        <span class="username_txt">验证码</span>
                        <input type="text" class="tel_code username" placeholder="请输入收到的验证码" name="">
                    </div>
                </div>
            </form>
            <div class="error_tipc" ></div>
            <!--<a href="javascript:void(0);" class="loginBtn">登录</a>-->
        </div>
    </section>
    <a href="javascript:void(0);" class="button">按钮</a>
<script src="Public/js/common/jquery-1.11.3.min.js"></script>
<script src="Public/js/common/layer.mobile/layer.js"></script>
<script src="public/js/common/public.js"></script>
<script src="public/js/common/common.js"></script>  
<script>
    $(function(){
        var userLoginForm=$('#userLoginForm').html();
        $('body').on('click','.button',function(){
            layer.open({
                title:['登录','border-bottom:1px solid #d9d9d9;'],
                className:'loginLayer',
                content:userLoginForm,
                btn:'登录',
                success:function(){
                    tab_down('.loginNav li','.loginTab .login_wrap','click');
                    $('.loginNav li').on('click',function(){
                        $('.loginLayer .error_tipc').hide();
                    })
                },
                yes:function(index){
                    var $layer=$('.loginLayer').find('.active');
                    var _index=$('.loginLayer').find('.login_wrap.active').index();
                    var content='';
                    switch(_index){
                        case 0:
                        var userName=$layer.find('.user_name').val();
                        var password=$layer.find('.password').val();
                        if(!register.phoneCheck(userName)){
                            content='请输入正确用户名';
                        }else if(!register.pswCheck(password)){
                            content = "请输入6-16数字或字母的密码";
                        }
                        // if(content){
                        //     $('.error_tipc').show().text(content);
                        //     return false;
                        // }
                        // $('.loginLayer .error_tipc').hide();

                        if(content){
                            $('.error_tipc').text(content).fadeIn().fadeOut(1200);
                            return false;
                        }
                        break;

                        case 1:
                        var userPhone=$layer.find('.user_phone').val();
                        var verifiCode=$layer.find('.tel_code').val();
                        if(!register.phoneCheck(userPhone)){
                            content='请输入正确手机号';
                        }else if(!register.vfyCheck(verifiCode)){
                            content = "请输入正确的验证码";
                        }
                        // if(content){
                        //     $('.error_tipc').show().text(content);
                        //     return false;
                        // }
                        // $('.error_tipc').hide();
                        if(content){
                            $('.error_tipc').text(content).fadeIn().fadeOut(1200);
                            return false;
                        }
                        break;
                    }
                    // var postData = $('#loginForm').serialize();            
                    // var url = CONTROLLER + '/login';
                    // $.post(url,postData,function(msg){
                    //     if(msg.status == 0){
                    //         layer.open({
                    //             content:msg.info,
                    //             time: 3
                    //         });
                    //         return false;
                    //     }else{
                    //         location.href = msg.info;
                    //     }
                    // });
                    
                    layer.close(index);
                }
            })
        })
        
    })
</script>  
</body>
</html>