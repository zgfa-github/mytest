<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title></title>
    <script src="Public/js/common/jquery-1.11.3.min.js"></script>
    <style>
      div{
        width: 100%;
        height: 50px;
        margin-bottom: 5px;
        background: yellowgreen;
      }
    </style>
  </head>

  <body>

    <h2>毫秒的倒计时</h2>
    <div id="timer1" class="abc">
        <span class="day"></span>天
        <span class="hour"></span>小时
        <span class="min"></span>分
        <span class="sec"></span>秒
    </div>
    <div id="timer2" class="abc">
        <span class="day"></span>天
        <span class="hour"></span>小时
        <span class="min"></span>分
        <span class="sec"></span>秒
    </div>
    <div id="timer3" class="abc">
        <span class="day"></span>天
        <span class="hour"></span>小时
        <span class="min"></span>分
        <span class="sec"></span>秒
    </div>
    <div id="timer4" class="abc">
        <span class="day"></span>天
        <span class="hour"></span>小时
        <span class="min"></span>分
        <span class="sec"></span>秒
    </div>
<script>
     var addTimer = function(){
         var list = [],callback,interval;
            return function(id,timeStamp){
                //console.log(timeStamp);
                //console.log(new Date().getTime());
                if(!interval){
                    interval = setInterval(go,1);
                }
                list.push(
                    {
                        ele:document.getElementById(id),
                        time:timeStamp
                    }
                );
            }

            function go() {
                console.log(123456789);
                for (var i = 0; i < list.length; i++) {
                    //list[i].ele.innerHTML = changeTimeStamp(list[i].time);
                    callback = changeTimeStamp(list[i].time);
                    for(var k=0;k<callback.length;k++){
                        list[i].ele.children[k].innerHTML=callback[k];
                    }
                    if (!list[i].time){
                        list.splice(i--, 1);
                        console.log(list.length);
                    }
                }
            }

            //传入unix时间戳，得到倒计时
            function changeTimeStamp(timeStamp){
                var distancetime = new Date(timeStamp*1000).getTime() - new Date().getTime();
                //var distancetime = timeStamp;
                
                if(distancetime > 0){
        　　　　　　 //如果大于0.说明尚未到达截止时间
                    //var ms = Math.floor(distancetime%1000);
                    var sec = Math.floor(distancetime/1000%60);
                    var min = Math.floor(distancetime/1000/60%60);
                    var hour =Math.floor(distancetime/1000/60/60%24);
                    var day = Math.floor(distancetime/1000000/60/60/24);

                    // if(ms<100){
                    //     ms = "0"+ ms;
                    // }
                    if(sec<10){
                        sec = "0"+ sec;
                    }
                    if(min<10){
                        min = "0"+ min;
                    }
                    if(hour<10){
                        hour = "0"+ hour;
                    }
                    //return day + ":" +hour + ":" +min + ":" +sec + ":"+ms;
                    return [day,hour,min,sec]
                }else{
　　　　　　　　　　　//若否，就是已经到截止时间了   
                    return "已截止！"
                }
            }
      }();

    //   addTimer("timer1",1516436478);
    //   addTimer("timer2",2451926800);
    //   addTimer("timer3",5451930400);
    //   addTimer("timer4",7452020500);
    var active=1000000000;
      for(var i=1;i<5;i++){
          //var aaa=1000000000+Math.round((1999999999-1000000000)*Math.random());
           addTimer("timer"+i,1520000000);
      }

</script>

  </body>

</html>